<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Simple Chat</title>
<style>
  body { font-family: sans-serif; max-width: 1024px; margin: auto; }
  #chat { border: 1px solid #ccc; padding: 10px; height: 600px; overflow-y: auto; white-space: pre-wrap; }
  think { font-size: small; font-style: italic; color: gray; display: block; margin: 10px 0px 5px 30px; }
  .msg { margin: 5px 0; }
  .me { color: black; margin-bottom: 20px; font-weight: bold;}
  .bot { color: black;  margin-bottom: 20px;}
</style>
</head>
<body>
<h1>Chat WebSocket</h1>
<div id="chat"></div>

<textarea id="msgInput" placeholder="Write message..." style="width: 80%; height: 60px;"></textarea>
<button id="sendBtn">Send</button>

<script>
let ws = new WebSocket(`ws://${location.host}/ws`);
let chat = document.getElementById("chat");
let input = document.getElementById("msgInput");
let btn = document.getElementById("sendBtn");

function addMessage(text, cls) {
    let div = document.createElement("div");
    div.className = `msg ${cls}`;
    div.innerHTML = text;
    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
}

ws.onmessage = (event) => {
    addMessage(event.data, "bot");
};

btn.onclick = () => {
    let text = input.value.trim();
    if (text) {
        ws.send(text);
        addMessage(text, "me");
        input.value = "";
    }
};

input.addEventListener("keydown", function(e) {
    if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault(); // Zapobiega przej≈õciu do nowej linii
        btn.click();
    }
});
</script>
</body>
</html>
